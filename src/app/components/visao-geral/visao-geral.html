<div class="container">
  <h2>Visão Geral</h2>

  @if(isLoading) {
    <div class="spinner-container">
      <mat-spinner></mat-spinner>
    </div>
  } @else if(error) {
    <p class="error-message">{{ error }}</p>
  } @else {
    <div class="stats-container">
      <mat-card>
        <mat-card-header>
          <mat-icon mat-card-avatar>pets</mat-icon>
          <mat-card-title>{{ stats?.total_porcas ?? 0 }}</mat-card-title>
          <mat-card-subtitle>Porcas Registradas</mat-card-subtitle>
        </mat-card-header>
      </mat-card>
       <mat-card>
        <mat-card-header>
          <mat-icon mat-card-avatar>vaccines</mat-icon>
          <mat-card-title>{{ stats?.total_vacinas ?? 0 }}</mat-card-title>
          <mat-card-subtitle>Tipos de Vacinas</mat-card-subtitle>
        </mat-card-header>
      </mat-card>
       <mat-card>
        <mat-card-header>
          <mat-icon mat-card-avatar>inventory_2</mat-icon>
          <mat-card-title>{{ stats?.total_lotes_vacinas ?? 0 }}</mat-card-title>
          <mat-card-subtitle>Lotes de Vacinas</mat-card-subtitle>
        </mat-card-header>
      </mat-card>
    </div>

    <div class="chart-container">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Volume de Aplicações Mensal</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          @if(barChartData.labels && barChartData.labels.length > 0){
            <canvas 
              baseChart
              [data]="barChartData"
              [options]="barChartOptions"
              [plugins]="barChartPlugins"
              [legend]="barChartLegend"
              type="bar">
            </canvas>
          } @else {
            <p class="empty-chart">Nenhum dado de aplicação encontrado para exibir no gráfico</p>
          }
        </mat-card-content>
      </mat-card>
    </div>
  }
</div>